<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>test</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="../lib/traceSDK.js"></script>
  </head>

  <body>
    <div id="app"></div>
    <div>
      <button onclick="test()">test</button>
    </div>
  </body>
</html>
<script>
  const request = axios.create();
  var traceSDK = new TraceSDK();
  traceSDK.axiosInit(request, {
    header: { 'Content-Type': 'application/json' },
    msgBox: Element.error
  });
  // // 添加一个请求拦截器
  // request.interceptors.request.use(
  //   function (config) {
  //     Object.assign(config.headers, traceSDK.getTraceIdHeader());
  //     return config;
  //   },
  //   function (error) {
  //     // Do something with request error
  //     return Promise.reject(error);
  //   }
  // );

  // // 添加一个响应拦截器
  // request.interceptors.response.use(
  //   function (response) {
  //     var traceId = res.config.headers['X-TRACE-ID'];
  //     Element.Message.error(traceId || '服务异常');
  //     // Do something with response data
  //     return response;
  //   },
  //   function (error) {
  //     // Do something with response error
  //     return Promise.reject(error);
  //   }
  // );

  function test() {
    var url = 'https://api.apiopen.top/getSingleJoke?sid=28654780';
    // console.log(request, 'request');
    request.get(url);
  }
</script>
